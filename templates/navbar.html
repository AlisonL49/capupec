{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAPUPEC</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'lib/bootstrap-5.3.3-dist/css/bootstrap.min.css'%}">

    <!-- Main CSS File -->
    <link rel="stylesheet" href="{% static 'assets/css/main.css' %}">
    <!-- CSS personalizado -->
    <link rel="stylesheet" href="{% static 'css/navbar.css' %}">
    <link rel="stylesheet" href="{% static 'css/styles2.css' %}">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <!-- jQuery UI -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">

</head>

<body>

    <!-- Navbar fija -->
    <nav class="custom-navbar navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <!-- Logo con separación izquierda -->
            <a class="navbar-brand">
                <img src="{% static 'img/logo.png' %}" alt="Logo" width="40" height="40" class="me-2">
                CAPUPEC
            </a>

            <!-- Título centrado dinámico -->
            <div class="d-flex flex-grow-1 justify-content-center">
                <h2 class="navbar-title">{{ titulo }}</h2>
            </div>

            <!-- Botón de cerrar sesión con separación derecha -->

            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav">
                    {% if user.is_authenticated %}
                    <li class="nav-item">
                        <form id="logout-form" action="{% url 'logout' %}" method="post" style="display: inline;">
                            {% csrf_token %}
                            <button type="submit" class="btn-logout">
                                Cerrar Sesión
                            </button>
                        </form>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>


    <div class="container-fluid">
        <div class="row">
            <!-- Barra lateral -->
            {% if user.is_authenticated and categoria_actual %}
            <nav class="col-md-3 col-lg-2 d-md-block sidebar shadow" style="background-color: #131413;">
                <ul class="nav flex-column pt-2">

                    <!-- ADMINISTRACIÓN -->
                    {% if categoria_actual == 'administracion' %}
                    <li class="nav-item">
                        <a href="{% url 'home' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/home/' %}active{% endif %}">
                            <span class="sidebar-icon "><i class="fas fa-home"></i></span>
                            <span class="sidebar-text">Inicio</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'representantes' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/administracion/representantes/' %}active{% endif %}">
                            <span class="sidebar-icon "><i class="fas fa-users"></i></span>
                            <span class="sidebar-text">Representantes</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'parametros' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/administracion/parametros/' %}active{% endif %}">
                            <span class="sidebar-icon "><i class="fas fa-cogs"></i></span>
                            <span class="sidebar-text">Parámetros generales</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'formas-pago' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/administracion/formas-pago/' %}active{% endif %}">
                            <span class="sidebar-icon "><i class="fas fa-credit-card"></i></span>
                            <span class="sidebar-text">Formas de pago</span>
                        </a>
                    </li>

                    <!-- Submenú Definición de Tipos -->
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center text-white py-3 small collapsed" data-bs-toggle="collapse" href="#submenuDefinicion" role="button" aria-expanded="false" aria-controls="submenuDefinicion">
                            <span class="sidebar-icon"><i class="fas fa-list "></i></span>
                            <span class="sidebar-text">Definición de Tipos</span>
                            <i class="fas fa-chevron-right ms-auto chevron-dropdown "></i>
                        </a>
                        <div class="collapse ps-4" id="submenuDefinicion">
                            <ul class="nav flex-column">
                                <li class="nav-item ps-3">
                                    <a href="{% url 'tipos-ahorros' %}" class="nav-link d-flex align-items-center text-white py-2 small {% if request.path == '/administracion/tipos-ahorros/' %}active{% endif %}">
                                        <span class="sidebar-text">Ahorros</span>
                                    </a>
                                </li>
                                <li class="nav-item ps-3">
                                    <a href="{% url 'tipos-credito' %}" class="nav-link d-flex align-items-center text-white py-2 small {% if request.path == '/administracion/tipos-credito/' %}active{% endif %}">
                                        <span class="sidebar-text">Crédito</span>
                                    </a>
                                </li>
                                <li class="nav-item ps-3">
                                    <a href="{% url 'tipos-ahorrofuturo' %}" class="nav-link d-flex align-items-center text-white py-2 small {% if request.path == '/administracion/tipos-ahorrofuturo/' %}active{% endif %}">
                                        <span class="sidebar-text">Ahorro Futuro</span>
                                    </a>
                                </li>
                                <li class="nav-item ps-3">
                                    <a href="{% url 'plazo-fijo' %}" class="nav-link d-flex align-items-center text-white py-2 small {% if request.path == '/administracion/plazo-fijo/' %}active{% endif %}">
                                        <span class="sidebar-text">Plazo Fijo</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </li>


                    <!-- Submenú Tasas de Interés -->
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center text-white py-3 small collapsed"
                            data-bs-toggle="collapse" 
                            href="#submenuTasas" 
                            role="button" 
                            aria-expanded="false"
                            aria-controls="submenuTasas">
                            <span class="sidebar-icon"><i class="fas fa-percent"></i></span>
                            <span class="sidebar-text">Tasas de Interés</span>
                            <i class="fas fa-chevron-right ms-auto chevron-dropdown"></i>
                        </a>
                        <div class="collapse ps-4" id="submenuTasas">
                            <ul class="nav flex-column">
                                <li class="nav-item ps-3">
                                    <a href="{% url 'interes-ahorros' %}" class="nav-link d-flex align-items-center text-white py-2 small {% if request.path == '/administracion/interes-ahorros/' %}active{% endif %}">
                                        <span class="sidebar-text">Ahorros</span>
                                    </a>
                                </li>
                                <li class="nav-item ps-3">
                                    <a href="{% url 'interes-ahorrofuturo' %}" class="nav-link d-flex align-items-center text-white py-2 small {% if request.path == '/administracion/interes-ahorrofuturo/' %}active{% endif %}">
                                        <span class="sidebar-text">Ahorro Futuro</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </li>

                    <!--<li class="nav-item">
                        <a href="{% url 'periodos-contables' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/administracion/periodos-contables/' %}active{% endif %}">
                            <span class="sidebar-icon "><i class="fas fa-calendar-alt"></i></span>
                            <span class="sidebar-text">Períodos Contables</span>
                        </a>
                    </li>-->
                    {% endif %}

                    <!-- OPERATIVO -->
                    {% if categoria_actual == 'operativo' %}
                    <li class="nav-item">
                        <a href="{% url 'home' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/home/' %}active{% endif %}">
                            <span class="sidebar-icon "><i class="fas fa-home"></i></span>
                            <span class="sidebar-text">Inicio</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'crear_usuario' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/operativo/socios/' %}active{% endif %}">
                            <span class="sidebar-icon"><i class="fas fa-users"></i></span>
                            <span class="sidebar-text">Socios</span>
                        </a>
                    </li>

                    <!-- Submenú Créditos -->
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center text-white py-2 small collapsed"
                            data-bs-toggle="collapse" href="#submenuCreditos" role="button" aria-expanded="false"
                            aria-controls="submenuCreditos">
                            <span class="sidebar-icon"><i class="fas fa-money-check-alt"></i></span>
                            <span class="sidebar-text">Créditos</span>
                            <i class="fas fa-chevron-right ms-auto chevron-dropdown"></i>
                        </a>
                        <div class="collapse ps-4" id="submenuCreditos">
                            <ul class="nav flex-column">
                                <li class="nav-item ps-3">
                                    <a href="{% url 'consulta-garantias' %}" class="nav-link d-flex align-items-center text-white py-2 small {% if request.path == '/operativo/consulta-garantias/' %}active{% endif %}">
                                        <span class="sidebar-text submenu">Consulta Garantías</span>
                                    </a>
                                </li>
                                <li class="nav-item ps-3">
                                    <a href="{% url 'solicitud' %}" class="nav-link d-flex align-items-center text-white py-2 small">
                                        <span class="sidebar-text submenu">Solicitud</span>
                                    </a>
                                </li>
                                <li class="nav-item ps-3">
                                    <a href="{% url 'consulta-aprobacion' %}" class="nav-link d-flex align-items-center text-white py-2 small">
                                       <span class="sidebar-text submenu">Consulta/Aprobación</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'ahorros' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/operativo/ahorros/' %}active{% endif %}">
                            <span class="sidebar-icon"><i class="fas fa-piggy-bank"></i></span>
                            <span class="sidebar-text">Ahorros</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'ahorro-futuro' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/operativo/ahorro-futuro/' %}active{% endif %}">
                            <span class="sidebar-icon"><i class="fas fa-hourglass-half"></i></span>
                            <span class="sidebar-text">Ahorro Futuro</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'debitos-cetificados' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/operativo/debitos-cetificados/' %}active{% endif %}">
                            <span class="sidebar-icon"><i class="fas fa-receipt"></i></span>
                            <span class="sidebar-text">Débitos Certificados</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'pagos-por-rol' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/operativo/pagos-por-rol/' %}active{% endif %}">
                            <span class="sidebar-icon "><i class="fas fa-user-check"></i></span>
                            <span class="sidebar-text">Pagos x Rol</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'caja' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/operativo/caja/' %}active{% endif %}">
                            <span class="sidebar-icon"><i class="fas fa-cash-register"></i></span>
                            <span class="sidebar-text">Caja</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'reportes' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/operativo/reportes/' %}active{% endif %}">
                            <span class="sidebar-icon"><i class="fas fa-chart-bar"></i></span>
                            <span class="sidebar-text">Reportes</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'cierre-diario' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/operativo/cierre-diario/' %}active{% endif %}">
                            <span class="sidebar-icon"><i class="fas fa-calendar-check"></i></span>
                            <span class="sidebar-text">Cierre Diario</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'distribucion-excedente' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/operativo/distribucion-excedente/' %}active{% endif %}">
                            <span class="sidebar-icon "><i class="fas fa-divide"></i></span>
                            <span class="sidebar-text">Distribución Excedente</span>
                        </a>
                    </li>
                    {% endif %}

                    <!-- CONTABILIDAD -->
                    {% if categoria_actual == 'contabilidad' %}
                    <li class="nav-item">
                        <a href="{% url 'home' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/home/' %}active{% endif %}">
                            <span class="sidebar-icon me-2"><i class="fas fa-home"></i></span>
                            <span class="sidebar-text">Inicio</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'plan-cuentas' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/contabilidad/plan-cuentas/' %}active{% endif %}">
                            <span class="sidebar-icon me-2"><i class="fas fa-book"></i></span>
                            <span class="sidebar-text">Plan de Cuentas</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'planilla-contable' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/contabilidad/planilla-contable/' %}active{% endif %}">
                            <span class="sidebar-icon me-2"><i class="fas fa-table"></i></span>
                            <span class="sidebar-text">Planilla Contable</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'mayor-auxiliar' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/contabilidad/mayor-auxiliar/' %}active{% endif %}">
                            <span class="sidebar-icon me-2"><i class="fas fa-layer-group"></i></span>
                            <span class="sidebar-text">Mayor Auxiliar</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'libro-diario' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/contabilidad/libro-diario/' %}active{% endif %}">
                            <span class="sidebar-icon me-2"><i class="fas fa-book-open"></i></span>
                            <span class="sidebar-text">Libro Diario</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'balance-comprobacion' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/contabilidad/balance-comprobacion/' %}active{% endif %}">
                            <span class="sidebar-icon me-2"><i class="fas fa-balance-scale"></i></span>
                            <span class="sidebar-text">Balance de Comprobación</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'balance-general' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/contabilidad/balance-general/' %}active{% endif %}">
                            <span class="sidebar-icon me-2"><i class="fas fa-balance-scale-left"></i></span>
                            <span class="sidebar-text">Balance General</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'estado-perdidas-ganancias' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/contabilidad/estado-perdidas-ganancias/' %}active{% endif %}">
                            <span class="sidebar-icon me-2"><i class="fas fa-chart-line"></i></span>
                            <span class="sidebar-text">Estado de Pérdidas/Ganancias</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'revision-crecimiento' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/contabilidad/revision-crecimiento/' %}active{% endif %}">
                            <span class="sidebar-icon me-2"><i class="fas fa-search-dollar"></i></span>
                            <span class="sidebar-text">Revisión Crecimiento</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'cierre-dia' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/contabilidad/cierre-dia/' %}active{% endif %}">
                            <span class="sidebar-icon me-2"><i class="fas fa-calendar-day"></i></span>
                            <span class="sidebar-text">Cierre Día</span>
                        </a>
                    </li>
                    {% endif %}

                    <!--SOCIOS -->
                    {% if categoria_actual == 'socios' %}
                    <li class="nav-item">
                        <a href="{% url 'dashboard' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/socios/dashboard' %}active{% endif %}">
                            <span class="sidebar-icon me-2"><i class="fas fa-home"></i></span>
                            <span class="sidebar-text">Inicio</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'perfil-usuario' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/socios/perfil-usuario/' %}active{% endif %}">
                            <span class="sidebar-icon me-2"><i class="fas fa-user"></i></span>
                            <span class="sidebar-text">Perfil</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'simulador' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/socios/simulador/' %}active{% endif %}">
                            <span class="sidebar-icon me-2"><i class="fas fa-calculator"></i></span>
                            <span class="sidebar-text">Simulador de Crédito</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'info-capupec' %}" class="nav-link d-flex align-items-center text-white py-3 small {% if request.path == '/socios/info-capupec/' %}active{% endif %}">
                            <span class="sidebar-icon me-2"><i class="fas fa-info-circle"></i></span>
                            <span class="sidebar-text">Información</span>
                        </a>
                    </li>
                    {% endif %}

                </ul>
            </nav>
            {% endif %}
            

            <!-- Contenido dinámico -->
            <main class="{% if categoria_actual %}col-md-9 ms-sm-auto col-lg-10{% else %}col-12{% endif %} ">
                {% block content %}{% endblock %}
            </main>
        </div>
    </div>

    


    <!-- Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'js/scripts.js' %}"></script>

</body>


</html>